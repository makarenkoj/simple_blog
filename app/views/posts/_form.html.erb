<div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100 animate-slideUp">
  <%= simple_form_for @post, html: { class: "post-form" } do |f| %>
    <!-- Error Notification -->
    <% if f.object.errors.any? %>
      <div class="bg-red-50 border-l-4 border-red-500 p-4 m-6 rounded-r-lg animate-shake">
        <div class="flex items-start">
          <svg class="w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
          </svg>
          <div class="flex-1">
            <h3 class="text-sm font-semibold text-red-800 mb-1">
              <%= t('post.errors.messages.not_saved', count: f.object.errors.count, default: 'Виникли помилки') %>
            </h3>
            <ul class="text-sm text-red-700 space-y-1">
              <% f.object.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    <% end %>
    <div class="px-6 sm:px-8 lg:px-10 py-8">
      <div class="space-y-8">
        <!-- Cover Image Section -->
        <div class="form-section">
          <div class="flex items-center mb-4">
            <svg class="w-5 h-5 text-emerald-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            <h2 class="text-lg font-bold text-slate-800">
              <%= t('activerecord.attributes.post.cover_image', default: 'Обкладинка') %>
            </h2>
          </div>
          <% if f.object.cover_image.attached? && f.object.cover_image.persisted? %>
            <div class="mb-4 relative group">
              <%= image_tag f.object.cover_image.representation(resize_to_limit: [800, 500]), 
                  class: "w-full h-48 sm:h-64 lg:h-80 object-cover rounded-2xl shadow-lg border-2 border-slate-200" %>
              <div class="absolute top-4 right-4">
                <%= link_to rails_blob_path(f.object.cover_image, disposition: "attachment"),
                    data: { turbo_method: :delete, turbo_confirm: t('confirm_remove_image', default: 'Видалити це зображення?') },
                    class: "inline-flex items-center px-3 py-2 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-lg shadow-lg transition-all duration-200" do %>
                  <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                  </svg>
                  <%= t('buttons.remove_image', default: 'Видалити') %>
                <% end %>
              </div>
            </div>
          <% end %>
          <label class="relative flex flex-col items-center justify-center w-full min-h-[160px] px-4 py-6 border-2 border-dashed border-slate-300 rounded-2xl cursor-pointer hover:border-emerald-400 hover:bg-emerald-50 transition-all duration-300 group">
            <%= f.file_field :cover_image, class: "hidden", accept: "image/*" %>
            <div class="text-center">
              <svg class="w-12 h-12 mx-auto text-slate-400 group-hover:text-emerald-500 transition-colors duration-300 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
              </svg>
              <p class="text-sm font-semibold text-slate-600 group-hover:text-emerald-600 transition-colors duration-300 mb-1">
                <%= t('buttons.click_to_upload', default: 'Натисніть, щоб завантажити') %>
              </p>
              <p class="text-xs text-slate-500">
                <%= t('buttons.image_formats', default: 'PNG, JPG, GIF до 10MB') %>
              </p>
            </div>
          </label>
        </div>
        <!-- Title Section -->
        <div class="form-section">
          <div class="flex items-center mb-3">
            <svg class="w-5 h-5 text-emerald-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
            </svg>
            <h2 class="text-lg font-bold text-slate-800">
              <%= t('activerecord.attributes.post.title', default: 'Заголовок') %>
            </h2>
          </div>
          <%= f.input_field :title,
              required: true,
              class: "w-full px-4 py-3.5 text-base sm:text-lg font-semibold border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 bg-white hover:border-slate-400",
              placeholder: t('activerecord.attributes.post.title_placeholder', default: 'Введіть заголовок вашого поста...') %>
        </div>
        <!-- Categories Section -->
        <div class="form-section">
          <div class="flex items-center mb-3">
            <svg class="w-5 h-5 text-emerald-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
            </svg>
            <h2 class="text-lg font-bold text-slate-800">
              <%= t('activerecord.attributes.posts.categories', default: 'Категорії') %>
            </h2>
          </div>
          <div class="bg-gradient-to-br from-slate-50 to-emerald-50 rounded-2xl p-5 border border-slate-200">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
              <%= f.collection_check_boxes :category_ids, Category.all.order(:name), :id, :name do |b| %>
                <label class="flex items-center space-x-3 p-3.5 rounded-xl hover:bg-white hover:shadow-sm transition-all duration-200 cursor-pointer group border border-transparent hover:border-emerald-200">
                  <%= b.check_box(class: "w-5 h-5 text-emerald-600 border-slate-300 rounded-md focus:ring-2 focus:ring-emerald-500 transition-all duration-200 cursor-pointer") %>
                  <span class="text-sm font-medium text-slate-700 group-hover:text-emerald-700 transition-colors duration-200">
                    <%= b.text %>
                  </span>
                </label>
              <% end %>
            </div>
          </div>
        </div>
        <!-- Body/Content Section -->
        <div class="form-section">
          <div class="flex items-center mb-3">
            <svg class="w-5 h-5 text-emerald-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            <h2 class="text-lg font-bold text-slate-800">
              <%= t('activerecord.attributes.post.body', default: 'Контент') %>
            </h2>
          </div>
          <div class="rich-text-wrapper border-2 border-slate-300 rounded-xl overflow-hidden hover:border-emerald-400 focus-within:border-emerald-500 focus-within:ring-2 focus-within:ring-emerald-500 transition-all duration-200">
            <%= f.rich_text_area :body,
                class: "w-full min-h-[300px] px-4 py-3 focus:outline-none",
                placeholder: t('activerecord.attributes.post.body_placeholder', default: 'Напишіть ваш пост тут...') %>
          </div>
          <p class="mt-2 text-xs text-slate-500 flex items-center">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <%= t('activerecord.attributes.post.body_hint', default: 'Використовуйте панель інструментів для форматування тексту') %>
          </p>
        </div>
      </div>
      <!-- Action Buttons -->
      <div class="mt-10 pt-8 border-t-2 border-slate-200">
        <div class="flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between">
          <!-- Back Button -->
          <div class="order-2 sm:order-1">
            <%= link_to :back, class: "inline-flex items-center justify-center px-6 py-3.5 border-2 border-slate-300 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 hover:border-slate-400 transition-all duration-300" do %>
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
              </svg>
              <span><%= t('activerecord.post.back', default: 'Назад') %></span>
            <% end %>
          </div>
          <!-- Save Button -->
          <div class="order-1 sm:order-2">
            <%= f.button :submit,
                class: "w-full sm:w-auto inline-flex items-center justify-center px-8 py-3.5 bg-gradient-to-r from-emerald-600 to-teal-600 font-bold rounded-xl shadow-lg hover:shadow-xl hover:from-emerald-700 hover:to-teal-700 transform hover:-translate-y-0.5 transition-all duration-300" do %>
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
              <span><%= t('activerecord.post.save', default: 'Зберегти пост') %></span>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
